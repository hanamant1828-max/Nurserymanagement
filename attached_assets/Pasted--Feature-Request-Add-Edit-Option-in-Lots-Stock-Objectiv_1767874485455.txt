âœï¸ Feature Request â€“ Add Edit Option in Lots & Stock
ğŸ¯ Objective

Allow users to edit a lot record directly from the Lots & Stock table.

This will let them update:

Sown quantity

Damaged quantity

Available stock

Status

Sowing / expected dates

Any other lot-related details

âŒ Current Behavior

In the Actions column, only:

âš  (Damage / Alert)

ğŸ—‘ (Delete)

ğŸ‘‰ There is no Edit option.

âœ… Expected Behavior
1ï¸âƒ£ Add an Edit Icon / Button in Actions Column

Each row should show:

âœ Edit   âš  Damage   ğŸ—‘ Delete

2ï¸âƒ£ Edit Action Behavior

When user clicks Edit:

âœ” Open Edit Lot form (modal / side panel / new page)
âœ” Pre-fill existing data:

Lot No

Variety

Sowing Date

Sown

Damaged

Available

Status

âœ” User can update values and save.

ğŸ”„ Backend Logic
Fetch Existing Lot
SELECT * FROM Lots WHERE lot_id = @LotId;

Update Lot
UPDATE Lots
SET 
    sowing_date = @SowingDate,
    sown = @Sown,
    damaged = @Damaged,
    available = @Available,
    status = @Status
WHERE lot_id = @LotId;


ğŸš« Do NOT create a new record
ğŸš« Do NOT change lot number unless explicitly allowed

ğŸ§® Validation Rules
âœ” Available Stock
Available = Sown - Damaged - Booked


(If you auto-calculate)

âœ” Damaged
Damaged â‰¤ Sown

âœ” Sown
Sown >= (Damaged + Booked)


If invalid:
ğŸ‘‰ Show error and disable Save.

ğŸ–¥ UI / UX Requirements

Add Edit icon (âœ) before Delete

Tooltip: â€œEdit Lotâ€

Show confirmation after update:

"Lot updated successfully"

ğŸ§ª Example Flow

1ï¸âƒ£ User clicks Edit on LOT-WA-1-1
2ï¸âƒ£ Modal opens with:

Sown: 1000
Damaged: 10
Available: 940
Status: Available


3ï¸âƒ£ User changes:

Damaged â†’ 20


4ï¸âƒ£ System recalculates:

Available = 1000 - 20 - Booked


5ï¸âƒ£ Save â†’ Row updates instantly

ğŸ§‘â€ğŸ’» Developer Checklist

âœ” Add Edit button in Actions column
âœ” Bind click â†’ open edit form with existing values
âœ” Validate stock math before saving
âœ” Update record in DB
âœ” Refresh table after save

ğŸ“Œ Optional Enhancements

Audit log:

"Lot LOT-WA-1-1 updated by Admin on 10-Jan-2026"


Role-based access:

Only Admin / Manager can Edit

Inline editing for Damaged / Status